---
layout: post
title: "table에 내용 추가"
---

# addTodoLists(resp)
```
function addTodoLists(resp){
    // toDoListsTable 이 있는지 확인
    // 그 다음 있으면 요소 삭제, 없으면 그대로 진행
    // 그러고 toDoLists에 테이블 id = toDoListsTable - resp 추가하기

    var todo = resp;
    var tableCheck = !!document.getElementById("toDoListsTable");

    // toDoListsTable이란 요소가 있다면 tableCheck에는 true가 들어감
    // true일 경우 요소를 삭제한 뒤 테이블을 다시 만들기
    if(tableCheck){
        console.log(tableCheck);
        tableCheck.remove();

    }
    console.log("addTodoLists");
    console.log(todo);
}
```

# 앞으로 추가해야될 코드
1) resp를 담은 todo 안에 총 몇개의 todolist가 있는지 변수에 담기  
`var todoCount = resp.length;`  

문제점 : 자바스크립트를 통해 map 데이터 가져오기..  

<br>

코드  
```
    console.log(todo);
    console.log(typeof(todo));
    for (var obj of todo){
        console.log(obj);
        console.log(typeof obj);
        temp = obj;
        console.log(temp[2]);
    }
```

<br>

결과  
![image](https://user-images.githubusercontent.com/86642180/165556054-96117af1-73d7-4d2d-8d68-6bddb6d5497e.png)
애초에 데이터타입이 object로 나오는데 자꾸 map.get을 쓸라해서 시간을 날렸다..  

<br>

`Object.entries()`를 통해 다시 진행  
```
    for (var obj of todo){
        console.log(obj);
        console.log(typeof obj);
        temp = Object.entries(obj).map(x=>x.join(":")).join("\n");
        console.log(temp);
    }
```

<br>

결과  
![image](https://user-images.githubusercontent.com/86642180/165558866-ae3d3186-4bc6-4908-9d90-fe1745ffa8d9.png)
이제 이렇게 쪼개지는 것 중에서 필요한 데이터만 따로 출력하면 되는데..  

<br>

```
    var str = '';
    for (const [p, val] of Object.entries(todo)) {
        str += `${p}:${val}\n`;
    }
    console.log(str);
```
이렇게는 안된다  
결과는  
![image](https://user-images.githubusercontent.com/86642180/165560017-ad13df0e-ab55-40a6-870c-b0ff6f4d655f.png)

<br>

```
    for (var obj of todo){
        temp = Object.entries(obj).map(x=>x.join(":")).join("\n");
        console.log(temp);
        first = obj[Object.keys(obj)[2]];
        console.log(first);
    }
```
object의 순서대로 키 값 가져오는거 성공!  
![image](https://user-images.githubusercontent.com/86642180/165561998-277ab8cf-749c-435d-89a3-4ee3ce828387.png)
이제 테이블에 추가하면 끝!!  

<br>

2) 변수의 개수에 맞게 반복문으로 toDoLists 태그 안에 테이블 생성  
```
    for (var i=0; i<todoCount; i++){
        toDoTable += "<tr>";
        // 테이블엔느 컬러, 콘텐츠, 실행여부 순서대로 td 추가

        for (var obj of todo){
            first = obj[Object.keys(obj)[2]];
            toDoTable += "<td>"
            toDoTable += first;
            toDoTable += "</td>";

            second = obj[Object.keys(obj)[4]];
            toDoTable += "<td>"
            toDoTable += second;
            toDoTable += "</td>";

            third = obj[Object.keys(obj)[5]];
            toDoTable += "<td>"
            toDoTable += third;
            toDoTable += "</td>";
        }

        toDoTable += "</tr>";
    }

    toDoTable += "</table>";
    console.log(toDoTable);
    toDoLists.appendChild(toDoTable);
```

<br>

테이블 생성 완료!  
![image](https://user-images.githubusercontent.com/86642180/165564358-e99dd97a-72b8-486a-ae7e-8f06e897f107.png)

<br>

3) todolist 테이블에 추가  
`toDoLists.appendChild(toDoTable);` 이게 안됨  

<br>

그리고 insert 기능 추가  
