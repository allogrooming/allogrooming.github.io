---
layout: post
title: "ini 폼 ajax 연결"
---


# readForm 함수 (common.js)
```
function readForm(formId, url){

      $.ajax({
             url : url,
             type : "post",
             dataType :"text",
             data : $(formId).serialize(),
             success : function(result){
                 console.log(result);
             },
             error : function(err){
                 console.log(err+"에러발생");
             }
      });

}
```
앞으로 작성할 모든 폼 데이터를 컨트롤러로 넘겨주는 함수  

<br>

# ini.html
```
        $("click").click(function(){
            console.log("click");
            readForm("iniForm","/readForm");
            console.log("readForm 종료");
        })
```
view에 함수 적용  

<br>

# 컨트롤러 test2
```
    @RequestMapping(value="/readForm", produces="text/html;charset=UTF-8")
    @ResponseBody
    @PostMapping
    public String test2(@RequestParam Map<String, String> param){
        for (String key : param.keySet()) {
            System.out.println(key + " : " + param.get(key));
        }

        return "success";
    }
```
<br>
Map도 key : value 형태니까  
syso로 찍어낼 때 key : value로 찍어내기  
사실 .get()으로 해도 가능은하다  
하지만 요일의 경우 집합 형태로 다수의 요일 데이터를 가져온다  
그래서 집합 형태로 Map에서 데이터를 가져오는 keySet을 사용  

<br>
![image](https://user-images.githubusercontent.com/86642180/151666578-fc773850-10b8-4ffe-bd2c-0dbcdcdeb676.png)

이렇게 view에서 선택했다  
폼 제출 뒤 결과는 이렇게 나왔다  
![image](https://user-images.githubusercontent.com/86642180/151666587-6087f830-b314-4c45-913f-6c4697107412.png)
일단 데이터 받는 것은 잘 되는데  
"매일"을 선택하면 어떤 주든 상관 없어야 해서 week 부분이 공란이어야 하는데 이상하다  

<br><br>
![image](https://user-images.githubusercontent.com/86642180/151704957-a1e04a09-c4e1-45ac-95d4-b50ab980e2b7.png)
공란인 옵션을 추가하니 원하는대로 작동된다  

